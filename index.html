<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div id="chart-area" style="width:600px;height:250px;"></div>
    <script>
        const TESTER = document.getElementById('chart-area')
        corsURL = 'https://api.allorigins.win/get?url='
        harianURL = 'https://corona.jepara.go.id/data/chart_harian'
        headers = new Headers({'Origin': 'https://corona.jepara.go.id'})
        fetch(corsURL + encodeURIComponent(harianURL), {headers: headers})
        .then(response => response.text())
        .then(text => text.substring(text.indexOf('[{')))
        .then(rawJSON => {
            let data = JSON.parse(rawJSON)
            Plotly.newPlot(
                TESTER,
                [{x: data.map(row => row.tanggal), y: data.map(row => row.covid_sum)}],
                {margin: {t: 0}},
            )
        })
    </script>
</body>
</html>
